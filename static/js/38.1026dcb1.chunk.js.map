{"version":3,"file":"static/js/38.1026dcb1.chunk.js","mappings":"4JACA,EAAwB,2B,SCoBxB,MAlBA,SAAqBA,GACnB,IAAIC,EAMJ,OAFEA,EAHGD,EAAMC,KAGFD,EAAMC,KAFN,QAKP,UAAC,EAAAC,SAAD,YACE,kBAAOC,QAASH,EAAMI,KAAtB,SAA6BJ,EAAMK,SACnC,SAAC,KAAD,CAAOD,KAAMJ,EAAMI,KAAMH,KAAMA,KAC/B,SAAC,KAAD,CAAcG,KAAMJ,EAAMI,KAAME,UAAWC,EAA3C,SACG,SAACC,GAAD,OAAS,gBAAKF,UAAWC,EAAhB,SAAgCC,Y,sMCyElD,UA7Ec,WACZ,IAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACjB,GAA0BC,EAAAA,EAAAA,UAAS,MAAnC,eAAOC,EAAP,KAAcC,EAAd,KACMC,EAAeC,EAAAA,KAAaC,MAAM,CACtCC,MAAOF,EAAAA,KACJE,MAAM,iBACNC,SAAS,2BACZC,SAAUJ,EAAAA,KACPK,IAAI,EAAG,cACPF,SAAS,6BAERG,EAAY,mCAAG,WAAOC,GAAP,oGAEMC,MACrBC,6CACA,CACEC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBX,MAAOK,EAAOL,MACdE,SAAUG,EAAOH,WAEnBU,QAAS,CACP,eAAgB,sBAXL,WAEXC,EAFW,QAeHC,GAfG,sBAgBT,IAAIC,MAAM,uBAhBD,uBAkBEF,EAASG,OAlBX,OAkBXC,EAlBW,OAmBjBC,aAAaC,QAAQ,WAAYT,KAAKC,UAAUM,IAC1CG,EAAsB,IAAIC,MAC9B,IAAIA,MAAOC,UAAY,MAEzBJ,aAAaC,QACX,QACAT,KAAKC,UAAU,CAAEY,MAAOH,EAAoBI,iBAE9ChC,EAAS,MAAO,CAAEiC,SAAS,IAC3BnC,EAASoC,EAAAA,EAAAA,MAAkBT,IA5BV,kDA8BjBrB,EAAS,KAAI+B,SACbC,QAAQC,IAAR,MA/BiB,0DAAH,sDAkClB,OACE,UAAC,EAAA9C,SAAD,aACKY,IAAS,SAAC,IAAD,CAAYA,MAAOA,EAAOmC,QAAS,kBAAMlC,GAAS,OAC9D,UAAC,IAAD,CAAMT,UAAWC,EAAAA,EAAAA,KAAjB,WACE,gBAAKD,UAAWC,EAAAA,EAAAA,UAAhB,UACE,uCAEF,SAAC,KAAD,CACE2C,cAAe,CAAE/B,MAAO,GAAIE,SAAU,IACtC8B,iBAAkBnC,EAClBoC,SAAU,SAAC5B,GACTD,EAAaC,IAJjB,SAOG,cAAG6B,OAAH,EAAWC,QAAX,OACC,UAAC,KAAD,YACE,SAAC,IAAD,CAAalD,KAAK,QAAQC,MAAM,QAAQJ,KAAK,WAC7C,SAAC,IAAD,CAAaG,KAAK,WAAWC,MAAM,WAAWJ,KAAK,cACnD,mBAAQK,UAAU,MAAML,KAAK,SAA7B,0BAMN,gBAAKK,UAAWC,EAAAA,EAAAA,UAAhB,UACE,SAAC,KAAD,CAAMgD,GAAG,YAAT,gE,yGCtEV,EAPiB,SAAAvD,GACf,OAAOwD,EAAAA,cACL,gBAAKlD,UAAU,WAAWmD,QAASzD,EAAMyD,UACzCC,SAASC,eAAe,mBCDtBC,EAAe,SAAA5D,GACnB,IAAM6D,GACJ,iBAAKvD,UAAS,gBAAWN,EAAMM,WAAawD,MAAO9D,EAAM8D,MAAzD,WACE,mBAAQxD,UAAS,wBAAmBN,EAAM+D,aAA1C,UACE,wBAAK/D,EAAMgE,YAEb,kBACEZ,SACEpD,EAAMoD,SAAWpD,EAAMoD,SAAW,SAAAa,GAAK,OAAIA,EAAMC,kBAFrD,WAKE,gBAAK5D,UAAS,yBAAoBN,EAAMmE,cAAxC,SACGnE,EAAMoE,YAET,mBAAQ9D,UAAS,wBAAmBN,EAAMqE,aAA1C,SACGrE,EAAMsE,eAKf,OAAOd,EAAAA,aAAsBK,EAASH,SAASC,eAAe,gBAoBhE,EAjBc,SAAA3D,GACZ,OACE,UAAC,WAAD,WACGA,EAAMuE,OAAQ,SAAC,EAAD,CAAUd,QAASzD,EAAMwE,YACxC,SAACC,EAAA,EAAD,CACEC,GAAI1E,EAAMuE,KACVI,cAAY,EACZC,eAAa,EACbC,QAAS,IACTC,WAAW,QALb,UAOE,SAAClB,GAAD,UAAkB5D,UCxC1B,EAAyB,2BAAzB,EAAgE,8BCoBhE,EAjBmB,SAACA,GAClB,OACE,SAAC,EAAD,CACEwE,SAAUxE,EAAMiD,QAChBe,OAAO,qBACPO,OAAQvE,EAAMc,MACdwD,QACE,mBAAQhE,UAAW,OAASC,EAAgBkD,QAASzD,EAAMiD,QAA3D,kBALJ,UAUE,cAAG3C,UAAWC,EAAd,SAAkCP,EAAMc,Y,mBCf9C,KAAgB,KAAO,oBAAoB,MAAQ,qBAAqB,UAAY","sources":["webpack://myblog/./src/components/FormikField.module.css?a32e","components/FormikField.jsx","pages/Login.jsx","ui/Modals/Backdrop.js","ui/Modals/Modal.js","webpack://myblog/./src/ui/Modals/ErrorModal.module.css?3752","ui/Modals/ErrorModal.js","webpack://myblog/./src/pages/Login.module.css?959c"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"error\":\"FormikField_error__DMXJM\"};","import React, { Fragment } from \"react\";\r\nimport { Field, ErrorMessage } from \"formik\";\r\nimport classes from \"./FormikField.module.css\";\r\nfunction FormikField(props) {\r\n  let type;\r\n  if (!props.type) {\r\n    type = \"text\";\r\n  } else {\r\n    type = props.type;\r\n  }\r\n  return (\r\n    <Fragment>\r\n      <label htmlFor={props.name}>{props.label}</label>\r\n      <Field name={props.name} type={type} />\r\n      <ErrorMessage name={props.name} className={classes.error}>\r\n        {(msg) => <div className={classes.error}>{msg}</div>}\r\n      </ErrorMessage>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default FormikField;\r\n","import React, { useState } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form } from \"formik\";\r\nimport Card from \"../ui/Card\";\r\nimport classes from \"./Login.module.css\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { userActions } from \"../store\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport FormikField from \"../components/FormikField\";\r\nimport { Fragment } from \"react/cjs/react.production.min\";\r\nimport ErrorModal from \"../ui/Modals/ErrorModal\";\r\nconst Login = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState(null);\r\n  const SignInSchema = Yup.object().shape({\r\n    email: Yup.string()\r\n      .email(\"Invalid email\")\r\n      .required(\"This field is Required!\"),\r\n    password: Yup.string()\r\n      .min(8, \"Too Short!\")\r\n      .required(\"This field is Required!\"),\r\n  });\r\n  const loginHandler = async (values) => {\r\n    try {\r\n      const response = await fetch(\r\n        process.env.REACT_APP_BACKEND_URL + \"/user/login\",\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify({\r\n            email: values.email,\r\n            password: values.password,\r\n          }),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(\"Invalid Credentials\");\r\n      }\r\n      const data = await response.json();\r\n      localStorage.setItem(\"userData\", JSON.stringify(data));\r\n      const tokenExpirationDate = new Date(\r\n        new Date().getTime() + 1000 * 60 * 60\r\n      );\r\n      localStorage.setItem(\r\n        \"timer\",\r\n        JSON.stringify({ timer: tokenExpirationDate.toISOString() })\r\n      );\r\n      navigate(\"../\", { replace: true });\r\n      dispatch(userActions.login(data));\r\n    } catch (err) {\r\n      setError(err.message);\r\n      console.log(err);\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      {!!error && <ErrorModal error={error} onClear={() => setError(false)} />}\r\n      <Card className={classes.card}>\r\n        <div className={classes.divisions}>\r\n          <h1>Sign In</h1>\r\n        </div>\r\n        <Formik\r\n          initialValues={{ email: \"\", password: \"\" }}\r\n          validationSchema={SignInSchema}\r\n          onSubmit={(values) => {\r\n            loginHandler(values);\r\n          }}\r\n        >\r\n          {({ errors, touched }) => (\r\n            <Form>\r\n              <FormikField name=\"email\" label=\"Email\" type=\"email\" />\r\n              <FormikField name=\"password\" label=\"Password\" type=\"password\" />\r\n              <button className=\"btn\" type=\"submit\">\r\n                Login\r\n              </button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n        <div className={classes.divisions}>\r\n          <Link to=\"../signup\">Sign Up if you don't have an account yet</Link>\r\n        </div>\r\n      </Card>\r\n    </Fragment>\r\n  );\r\n};\r\nexport default Login;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Backdrop.css';\n\nconst Backdrop = props => {\n  return ReactDOM.createPortal(\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\n    document.getElementById('backdrop-hook')\n  );\n};\n\nexport default Backdrop;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CSSTransition } from 'react-transition-group';\n\nimport Backdrop from './Backdrop';\nimport './Modal.css';\n\nconst ModalOverlay = props => {\n  const content = (\n    <div className={`modal ${props.className}`} style={props.style}>\n      <header className={`modal__header ${props.headerClass}`}>\n        <h2>{props.header}</h2>\n      </header>\n      <form\n        onSubmit={\n          props.onSubmit ? props.onSubmit : event => event.preventDefault()\n        }\n      >\n        <div className={`modal__content ${props.contentClass}`}>\n          {props.children}\n        </div>\n        <footer className={`modal__footer ${props.footerClass}`}>\n          {props.footer}\n        </footer>\n      </form>\n    </div>\n  );\n  return ReactDOM.createPortal(content, document.getElementById('modal-hook'));\n};\n\nconst Modal = props => {\n  return (\n    <React.Fragment>\n      {props.show && <Backdrop onClick={props.onCancel} />}\n      <CSSTransition\n        in={props.show}\n        mountOnEnter\n        unmountOnExit\n        timeout={200}\n        classNames=\"modal\"\n      >\n        <ModalOverlay {...props} />\n      </CSSTransition>\n    </React.Fragment>\n  );\n};\n\nexport default Modal;\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"ErrorModal_button__z4CrP\",\"errorText\":\"ErrorModal_errorText__hRibp\"};","import React from \"react\";\n\nimport Modal from \"./Modal\";\nimport classes from \"./ErrorModal.module.css\";\nconst ErrorModal = (props) => {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={\n        <button className={\"btn \" + classes.button} onClick={props.onClear}>\n          Okay\n        </button>\n      }\n    >\n      <p className={classes.errorText}>{props.error}</p>\n    </Modal>\n  );\n};\n\nexport default ErrorModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"Login_card__qPd2l\",\"error\":\"Login_error__YoxhO\",\"divisions\":\"Login_divisions__5RVlG\"};"],"names":["props","type","Fragment","htmlFor","name","label","className","classes","msg","dispatch","useDispatch","navigate","useNavigate","useState","error","setError","SignInSchema","Yup","shape","email","required","password","min","loginHandler","values","fetch","process","method","body","JSON","stringify","headers","response","ok","Error","json","data","localStorage","setItem","tokenExpirationDate","Date","getTime","timer","toISOString","replace","userActions","message","console","log","onClear","initialValues","validationSchema","onSubmit","errors","touched","to","ReactDOM","onClick","document","getElementById","ModalOverlay","content","style","headerClass","header","event","preventDefault","contentClass","children","footerClass","footer","show","onCancel","CSSTransition","in","mountOnEnter","unmountOnExit","timeout","classNames"],"sourceRoot":""}