{"version":3,"file":"static/js/586.18c3017b.chunk.js","mappings":"gNACA,EAAuB,uBAAvB,EAAqD,uBAArD,EAAsF,0B,8BCAtF,EAAyB,6B,SCiCzB,MA9BA,SAAsBA,GACpB,IAAMC,GAAQC,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,KAAKH,SAC1CI,GAAWC,EAAAA,EAAAA,MACXC,EAAKP,EAAMO,GACXC,EAAa,mCAAG,6GAEKC,MAAM,GAAD,OACvBC,kCADuB,iBACmBH,GAC7C,CACEI,OAAQ,SACRC,QAAS,CACPC,cAAc,UAAD,OAAYZ,MAPb,UAEZa,EAFY,OAWlBT,GAAU,GACLS,EAASC,GAZI,sBAaV,IAAIC,MAAM,8BAbA,uDAgBlBC,QAAQC,IAAR,MAhBkB,yDAAH,qDAmBnB,OACE,mBAAQC,UAAS,UAAKC,EAAL,QAA2BC,QAASb,EAArD,qB,UC+BJ,EAnDiB,WACf,IACQD,GADOe,EAAAA,EAAAA,MACPf,GACR,GAAwBgB,EAAAA,EAAAA,UAAS,MAAjC,eAAOC,EAAP,KAAaC,EAAb,KACMrB,GAAOF,EAAAA,EAAAA,KAAY,SAACC,GAAD,OAAWA,EAAMC,SAC1CsB,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAS,mCAAG,+GAESlB,MAAM,GAAD,OACvBC,kCADuB,uBACyBH,IAHvC,WAERO,EAFQ,QAKAC,GALA,sBAMN,IAAIC,MAAM,6BANJ,uBAQKF,EAASc,OARd,OAQRC,EARQ,OASdJ,EAAQI,EAAKL,MATC,kDAWdP,QAAQC,IAAR,MAXc,0DAAH,qDAcfS,MACC,CAACpB,IAEJ,IAAMuB,IAAaN,EACfO,GAAa,EAIjB,OAHM3B,EAAKH,OAASuB,IAClBO,EAAaP,EAAKQ,OAAOC,MAAQ7B,EAAKG,KAGtC,UAAC,EAAA2B,SAAD,WACGJ,GACC,UAACK,EAAA,EAAD,CAAMhB,UAAWC,EAAjB,WACE,0BAAKI,EAAKY,MAAV,QACA,0BAAKZ,EAAKQ,OAAOK,UAAY,IAAMb,EAAKQ,OAAOM,SAA/C,QACA,wBAAKd,EAAKe,eACV,uBAAIf,EAAKgB,cAGX,SAACC,EAAA,EAAD,IAEDV,IACC,iBAAKZ,UAAWC,EAAhB,WACE,SAAC,KAAD,CAAMsB,GAAE,gBAAWnC,GAAnB,UACE,mBAAQY,UAAS,UAAKC,EAAL,QAAjB,qBAEF,SAAC,EAAD,CAAcb,GAAIA","sources":["webpack://myblog/./src/pages/BlogPage.module.css?88dd","webpack://myblog/./src/ui/DeleteButton.module.css?2d59","ui/DeleteButton.jsx","pages/BlogPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"card\":\"BlogPage_card__vNbaW\",\"edit\":\"BlogPage_edit__HWS9h\",\"buttons\":\"BlogPage_buttons__2FqmJ\"};","// extracted by mini-css-extract-plugin\nexport default {\"delete\":\"DeleteButton_delete__dn4W7\"};","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport classes from \"./DeleteButton.module.css\";\r\nfunction DeleteButton(props) {\r\n  const token = useSelector((state) => state.user.token);\r\n  const navigate = useNavigate();\r\n  const id = props.id;\r\n  const deleteHandler = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.REACT_APP_BACKEND_URL}/user/${id}`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            authorization: `BEARER ${token}`,\r\n          },\r\n        }\r\n      );\r\n      navigate(-1);\r\n      if (!response.ok) {\r\n        throw new Error(\"Could not delete blog page\");\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  return (\r\n    <button className={`${classes.delete} btn`} onClick={deleteHandler}>\r\n      Delete\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default DeleteButton;\r\n","import { useParams } from \"react-router-dom\";\r\nimport Card from \"../ui/Card\";\r\nimport classes from \"./BlogPage.module.css\";\r\nimport { useState, useEffect, Fragment } from \"react\";\r\nimport LoadingSpinner from \"../ui/LoadingSpinner\";\r\nimport { useSelector } from \"react-redux\";\r\nimport DeleteButton from \"../ui/DeleteButton\";\r\nimport { Link } from \"react-router-dom\";\r\nconst BlogPage = () => {\r\n  const params = useParams();\r\n  const { id } = params;\r\n  const [blog, setBlog] = useState(null);\r\n  const user = useSelector((state) => state.user);\r\n  useEffect(() => {\r\n    const fetchBlog = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.REACT_APP_BACKEND_URL}/blogs/blog/${id}`\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Could not fetch blog page\");\r\n        }\r\n        const data = await response.json();\r\n        setBlog(data.blog);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    fetchBlog();\r\n  }, [id]);\r\n\r\n  const boolBlog = !!blog;\r\n  let boolModify = false;\r\n  if (!!user.token && blog) {\r\n    boolModify = blog.author._id === user.id;\r\n  }\r\n  return (\r\n    <Fragment>\r\n      {boolBlog ? (\r\n        <Card className={classes.card}>\r\n          <h1>{blog.title} </h1>\r\n          <h2>{blog.author.firstName + \" \" + blog.author.lastName} </h2>\r\n          <h3>{blog.description}</h3>\r\n          <p>{blog.article}</p>\r\n        </Card>\r\n      ) : (\r\n        <LoadingSpinner />\r\n      )}\r\n      {boolModify && (\r\n        <div className={classes.buttons}>\r\n          <Link to={`/edit/${id}`}>\r\n            <button className={`${classes.edit} btn`}>Edit</button>\r\n          </Link>\r\n          <DeleteButton id={id} />\r\n        </div>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\nexport default BlogPage;\r\n"],"names":["props","token","useSelector","state","user","navigate","useNavigate","id","deleteHandler","fetch","process","method","headers","authorization","response","ok","Error","console","log","className","classes","onClick","useParams","useState","blog","setBlog","useEffect","fetchBlog","json","data","boolBlog","boolModify","author","_id","Fragment","Card","title","firstName","lastName","description","article","LoadingSpinner","to"],"sourceRoot":""}