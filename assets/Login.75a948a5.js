import{e as g,a as E,r as e,F as h,C as S,L as f,f as x}from"./index.b47de396.js";import{c as w,a as n,F as y,b as v}from"./formik.esm.5b541d60.js";import{E as N,c as s}from"./ErrorModal.1667755d.js";import{F as l}from"./FormikField.84ccb80b.js";const T=()=>{const m=g(),c=E(),[r,o]=e.exports.useState(null),p=w().shape({email:n().email("Invalid email").required("This field is Required!"),password:n().min(8,"Too Short!").required("This field is Required!")}),d=async a=>{try{const t=await fetch({}.REACT_APP_BACKEND_URL+"/user/login",{method:"POST",body:JSON.stringify({email:a.email,password:a.password}),headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Invalid Credentials");const i=await t.json();localStorage.setItem("userData",JSON.stringify(i));const u=new Date(new Date().getTime()+1e3*60*60);localStorage.setItem("timer",JSON.stringify({timer:u.toISOString()})),c("../",{replace:!0}),m(x.login(i))}catch(t){o(t.message),console.log(t)}};return e.exports.createElement(h,null,!!r&&e.exports.createElement(N,{error:r,onClear:()=>o(!1)}),e.exports.createElement(S,{className:s.card},e.exports.createElement("div",{className:s.divisions},e.exports.createElement("h1",null,"Sign In")),e.exports.createElement(y,{initialValues:{email:"",password:""},validationSchema:p,onSubmit:a=>{d(a)}},({errors:a,touched:t})=>e.exports.createElement(v,null,e.exports.createElement(l,{name:"email",label:"Email",type:"email"}),e.exports.createElement(l,{name:"password",label:"Password",type:"password"}),e.exports.createElement("button",{className:"btn",type:"submit"},"Login"))),e.exports.createElement("div",{className:s.divisions},e.exports.createElement(f,{to:"../signup"},"Sign Up if you don't have an account yet"))))};export{T as default};
